var as=Object.create;var Ot=Object.defineProperty,us=Object.defineProperties,ls=Object.getOwnPropertyDescriptor,cs=Object.getOwnPropertyDescriptors,hs=Object.getOwnPropertyNames,se=Object.getOwnPropertySymbols,ps=Object.getPrototypeOf,re=Object.prototype.hasOwnProperty,fs=Object.prototype.propertyIsEnumerable;var ne=(e,t,s)=>t in e?Ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,D=(e,t)=>{for(var s in t||(t={}))re.call(t,s)&&ne(e,s,t[s]);if(se)for(var s of se(t))fs.call(t,s)&&ne(e,s,t[s]);return e},J=(e,t)=>us(e,cs(t)),ms=e=>Ot(e,"__esModule",{value:!0});var K=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var gs=(e,t,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of hs(t))!re.call(e,r)&&r!=="default"&&Ot(e,r,{get:()=>t[r],enumerable:!(s=ls(t,r))||s.enumerable});return e},ut=e=>gs(ms(Ot(e!=null?as(ps(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Ut=K((wr,oe)=>{"use strict";var w=(...e)=>e.every(t=>t)?e.join(""):"",Q=e=>e?encodeURIComponent(e):"",Ht={sshtemplate:({domain:e,user:t,project:s,committish:r})=>`git@${e}:${t}/${s}.git${w("#",r)}`,sshurltemplate:({domain:e,user:t,project:s,committish:r})=>`git+ssh://git@${e}/${t}/${s}.git${w("#",r)}`,browsetemplate:({domain:e,user:t,project:s,committish:r,treepath:n})=>`https://${e}/${t}/${s}${w("/",n,"/",Q(r))}`,browsefiletemplate:({domain:e,user:t,project:s,committish:r,treepath:n,path:l,fragment:u,hashformat:h})=>`https://${e}/${t}/${s}/${n}/${Q(r||"master")}/${l}${w("#",h(u||""))}`,docstemplate:({domain:e,user:t,project:s,treepath:r,committish:n})=>`https://${e}/${t}/${s}${w("/",r,"/",Q(n))}#readme`,httpstemplate:({auth:e,domain:t,user:s,project:r,committish:n})=>`git+https://${w(e,"@")}${t}/${s}/${r}.git${w("#",n)}`,filetemplate:({domain:e,user:t,project:s,committish:r,path:n})=>`https://${e}/${t}/${s}/raw/${Q(r)||"master"}/${n}`,shortcuttemplate:({type:e,user:t,project:s,committish:r})=>`${e}:${t}/${s}${w("#",r)}`,pathtemplate:({user:e,project:t,committish:s})=>`${e}/${t}${w("#",s)}`,bugstemplate:({domain:e,user:t,project:s})=>`https://${e}/${t}/${s}/issues`,hashformat:ie},Z={};Z.github=Object.assign({},Ht,{protocols:["git:","http:","git+ssh:","git+https:","ssh:","https:"],domain:"github.com",treepath:"tree",filetemplate:({auth:e,user:t,project:s,committish:r,path:n})=>`https://${w(e,"@")}raw.githubusercontent.com/${t}/${s}/${Q(r)||"master"}/${n}`,gittemplate:({auth:e,domain:t,user:s,project:r,committish:n})=>`git://${w(e,"@")}${t}/${s}/${r}.git${w("#",n)}`,tarballtemplate:({domain:e,user:t,project:s,committish:r})=>`https://codeload.${e}/${t}/${s}/tar.gz/${Q(r)||"master"}`,extract:e=>{let[,t,s,r,n]=e.pathname.split("/",5);if(!(r&&r!=="tree")&&(r||(n=e.hash.slice(1)),s&&s.endsWith(".git")&&(s=s.slice(0,-4)),!(!t||!s)))return{user:t,project:s,committish:n}}});Z.bitbucket=Object.assign({},Ht,{protocols:["git+ssh:","git+https:","ssh:","https:"],domain:"bitbucket.org",treepath:"src",tarballtemplate:({domain:e,user:t,project:s,committish:r})=>`https://${e}/${t}/${s}/get/${Q(r)||"master"}.tar.gz`,extract:e=>{let[,t,s,r]=e.pathname.split("/",4);if(!["get"].includes(r)&&(s&&s.endsWith(".git")&&(s=s.slice(0,-4)),!(!t||!s)))return{user:t,project:s,committish:e.hash.slice(1)}}});Z.gitlab=Object.assign({},Ht,{protocols:["git+ssh:","git+https:","ssh:","https:"],domain:"gitlab.com",treepath:"tree",httpstemplate:({auth:e,domain:t,user:s,project:r,committish:n})=>`git+https://${w(e,"@")}${t}/${s}/${r}.git${w("#",n)}`,tarballtemplate:({domain:e,user:t,project:s,committish:r})=>`https://${e}/${t}/${s}/repository/archive.tar.gz?ref=${Q(r)||"master"}`,extract:e=>{let t=e.pathname.slice(1);if(t.includes("/-/")||t.includes("/archive.tar.gz"))return;let s=t.split("/"),r=s.pop();r.endsWith(".git")&&(r=r.slice(0,-4));let n=s.join("/");if(!(!n||!r))return{user:n,project:r,committish:e.hash.slice(1)}}});Z.gist=Object.assign({},Ht,{protocols:["git:","git+ssh:","git+https:","ssh:","https:"],domain:"gist.github.com",sshtemplate:({domain:e,project:t,committish:s})=>`git@${e}:${t}.git${w("#",s)}`,sshurltemplate:({domain:e,project:t,committish:s})=>`git+ssh://git@${e}/${t}.git${w("#",s)}`,browsetemplate:({domain:e,project:t,committish:s})=>`https://${e}/${t}${w("/",Q(s))}`,browsefiletemplate:({domain:e,project:t,committish:s,path:r,hashformat:n})=>`https://${e}/${t}${w("/",Q(s))}${w("#",n(r))}`,docstemplate:({domain:e,project:t,committish:s})=>`https://${e}/${t}${w("/",Q(s))}`,httpstemplate:({domain:e,project:t,committish:s})=>`git+https://${e}/${t}.git${w("#",s)}`,filetemplate:({user:e,project:t,committish:s,path:r})=>`https://gist.githubusercontent.com/${e}/${t}/raw${w("/",Q(s))}/${r}`,shortcuttemplate:({type:e,project:t,committish:s})=>`${e}:${t}${w("#",s)}`,pathtemplate:({project:e,committish:t})=>`${e}${w("#",t)}`,bugstemplate:({domain:e,project:t})=>`https://${e}/${t}`,gittemplate:({domain:e,project:t,committish:s})=>`git://${e}/${t}.git${w("#",s)}`,tarballtemplate:({project:e,committish:t})=>`https://codeload.github.com/gist/${e}/tar.gz/${Q(t)||"master"}`,extract:e=>{let[,t,s,r]=e.pathname.split("/",4);if(r!=="raw"){if(!s){if(!t)return;s=t,t=null}return s.endsWith(".git")&&(s=s.slice(0,-4)),{user:t,project:s,committish:e.hash.slice(1)}}},hashformat:function(e){return e&&"file-"+ie(e)}});var ds=Object.keys(Z);Z.byShortcut={};Z.byDomain={};for(let e of ds)Z.byShortcut[`${e}:`]=e,Z.byDomain[Z[e].domain]=e;function ie(e){return e.toLowerCase().replace(/^\W+|\/|\W+$/g,"").replace(/\W+/g,"-")}oe.exports=Z});var le=K((Lr,ue)=>{"use strict";var ys=Ut(),ae=class{constructor(t,s,r,n,l,u,h={}){Object.assign(this,ys[t]),this.type=t,this.user=s,this.auth=r,this.project=n,this.committish=l,this.default=u,this.opts=h}hash(){return this.committish?`#${this.committish}`:""}ssh(t){return this._fill(this.sshtemplate,t)}_fill(t,s){if(typeof t=="function"){let r=D(D(D({},this),this.opts),s);r.path||(r.path=""),r.path.startsWith("/")&&(r.path=r.path.slice(1)),r.noCommittish&&(r.committish=null);let n=t(r);return r.noGitPlus&&n.startsWith("git+")?n.slice(4):n}return null}sshurl(t){return this._fill(this.sshurltemplate,t)}browse(t,s,r){return typeof t!="string"?this._fill(this.browsetemplate,t):(typeof s!="string"&&(r=s,s=null),this._fill(this.browsefiletemplate,J(D({},r),{fragment:s,path:t})))}docs(t){return this._fill(this.docstemplate,t)}bugs(t){return this._fill(this.bugstemplate,t)}https(t){return this._fill(this.httpstemplate,t)}git(t){return this._fill(this.gittemplate,t)}shortcut(t){return this._fill(this.shortcuttemplate,t)}path(t){return this._fill(this.pathtemplate,t)}tarball(t){return this._fill(this.tarballtemplate,J(D({},t),{noCommittish:!1}))}file(t,s){return this._fill(this.filetemplate,J(D({},s),{path:t}))}getDefaultRepresentation(){return this.default}toString(t){return this.default&&typeof this[this.default]=="function"?this[this.default](t):this.sshurl(t)}};ue.exports=ae});var he=K((Tr,ce)=>{"use strict";ce.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var fe=K((Ir,pe)=>{"use strict";pe.exports=R;R.Node=ct;R.create=R;function R(e){var t=this;if(t instanceof R||(t=new R),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(n){t.push(n)});else if(arguments.length>0)for(var s=0,r=arguments.length;s<r;s++)t.push(arguments[s]);return t}R.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,s=e.prev;return t&&(t.prev=s),s&&(s.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=s),e.list.length--,e.next=null,e.prev=null,e.list=null,t};R.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};R.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};R.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)$s(this,arguments[e]);return this.length};R.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)vs(this,arguments[e]);return this.length};R.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};R.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};R.prototype.forEach=function(e,t){t=t||this;for(var s=this.head,r=0;s!==null;r++)e.call(t,s.value,r,this),s=s.next};R.prototype.forEachReverse=function(e,t){t=t||this;for(var s=this.tail,r=this.length-1;s!==null;r--)e.call(t,s.value,r,this),s=s.prev};R.prototype.get=function(e){for(var t=0,s=this.head;s!==null&&t<e;t++)s=s.next;if(t===e&&s!==null)return s.value};R.prototype.getReverse=function(e){for(var t=0,s=this.tail;s!==null&&t<e;t++)s=s.prev;if(t===e&&s!==null)return s.value};R.prototype.map=function(e,t){t=t||this;for(var s=new R,r=this.head;r!==null;)s.push(e.call(t,r.value,this)),r=r.next;return s};R.prototype.mapReverse=function(e,t){t=t||this;for(var s=new R,r=this.tail;r!==null;)s.push(e.call(t,r.value,this)),r=r.prev;return s};R.prototype.reduce=function(e,t){var s,r=this.head;if(arguments.length>1)s=t;else if(this.head)r=this.head.next,s=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;r!==null;n++)s=e(s,r.value,n),r=r.next;return s};R.prototype.reduceReverse=function(e,t){var s,r=this.tail;if(arguments.length>1)s=t;else if(this.tail)r=this.tail.prev,s=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;r!==null;n--)s=e(s,r.value,n),r=r.prev;return s};R.prototype.toArray=function(){for(var e=new Array(this.length),t=0,s=this.head;s!==null;t++)e[t]=s.value,s=s.next;return e};R.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,s=this.tail;s!==null;t++)e[t]=s.value,s=s.prev;return e};R.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var s=new R;if(t<e||t<0)return s;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,n=this.head;n!==null&&r<e;r++)n=n.next;for(;n!==null&&r<t;r++,n=n.next)s.push(n.value);return s};R.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var s=new R;if(t<e||t<0)return s;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,n=this.tail;n!==null&&r>t;r--)n=n.prev;for(;n!==null&&r>e;r--,n=n.prev)s.push(n.value);return s};R.prototype.splice=function(e,t,...s){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,n=this.head;n!==null&&r<e;r++)n=n.next;for(var l=[],r=0;n&&r<t;r++)l.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var r=0;r<s.length;r++)n=_s(this,n,s[r]);return l};R.prototype.reverse=function(){for(var e=this.head,t=this.tail,s=e;s!==null;s=s.prev){var r=s.prev;s.prev=s.next,s.next=r}return this.head=t,this.tail=e,this};function _s(e,t,s){var r=t===e.head?new ct(s,null,t,e):new ct(s,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function $s(e,t){e.tail=new ct(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function vs(e,t){e.head=new ct(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function ct(e,t,s,r){if(!(this instanceof ct))return new ct(e,t,s,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,s?(s.prev=this,this.next=s):this.next=null}try{he()(R)}catch{}});var ve=K((Nr,$e)=>{"use strict";var As=fe(),ht=Symbol("max"),rt=Symbol("length"),mt=Symbol("lengthCalculator"),$t=Symbol("allowStale"),pt=Symbol("maxAge"),nt=Symbol("dispose"),me=Symbol("noDisposeOnSet"),U=Symbol("lruList"),Y=Symbol("cache"),ge=Symbol("updateAgeOnGet"),Pt=()=>1,de=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let s=this[ht]=t.max||1/0,r=t.length||Pt;if(this[mt]=typeof r!="function"?Pt:r,this[$t]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[pt]=t.maxAge||0,this[nt]=t.dispose,this[me]=t.noDisposeOnSet||!1,this[ge]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[ht]=t||1/0,vt(this)}get max(){return this[ht]}set allowStale(t){this[$t]=!!t}get allowStale(){return this[$t]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[pt]=t,vt(this)}get maxAge(){return this[pt]}set lengthCalculator(t){typeof t!="function"&&(t=Pt),t!==this[mt]&&(this[mt]=t,this[rt]=0,this[U].forEach(s=>{s.length=this[mt](s.value,s.key),this[rt]+=s.length})),vt(this)}get lengthCalculator(){return this[mt]}get length(){return this[rt]}get itemCount(){return this[U].length}rforEach(t,s){s=s||this;for(let r=this[U].tail;r!==null;){let n=r.prev;_e(this,t,r,s),r=n}}forEach(t,s){s=s||this;for(let r=this[U].head;r!==null;){let n=r.next;_e(this,t,r,s),r=n}}keys(){return this[U].toArray().map(t=>t.key)}values(){return this[U].toArray().map(t=>t.value)}reset(){this[nt]&&this[U]&&this[U].length&&this[U].forEach(t=>this[nt](t.key,t.value)),this[Y]=new Map,this[U]=new As,this[rt]=0}dump(){return this[U].map(t=>wt(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[U]}set(t,s,r){if(r=r||this[pt],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let n=r?Date.now():0,l=this[mt](s,t);if(this[Y].has(t)){if(l>this[ht])return gt(this,this[Y].get(t)),!1;let p=this[Y].get(t).value;return this[nt]&&(this[me]||this[nt](t,p.value)),p.now=n,p.maxAge=r,p.value=s,this[rt]+=l-p.length,p.length=l,this.get(t),vt(this),!0}let u=new ye(t,s,l,n,r);return u.length>this[ht]?(this[nt]&&this[nt](t,s),!1):(this[rt]+=u.length,this[U].unshift(u),this[Y].set(t,this[U].head),vt(this),!0)}has(t){if(!this[Y].has(t))return!1;let s=this[Y].get(t).value;return!wt(this,s)}get(t){return Bt(this,t,!0)}peek(t){return Bt(this,t,!1)}pop(){let t=this[U].tail;return t?(gt(this,t),t.value):null}del(t){gt(this,this[Y].get(t))}load(t){this.reset();let s=Date.now();for(let r=t.length-1;r>=0;r--){let n=t[r],l=n.e||0;if(l===0)this.set(n.k,n.v);else{let u=l-s;u>0&&this.set(n.k,n.v,u)}}}prune(){this[Y].forEach((t,s)=>Bt(this,s,!1))}},Bt=(e,t,s)=>{let r=e[Y].get(t);if(r){let n=r.value;if(wt(e,n)){if(gt(e,r),!e[$t])return}else s&&(e[ge]&&(r.value.now=Date.now()),e[U].unshiftNode(r));return n.value}},wt=(e,t)=>{if(!t||!t.maxAge&&!e[pt])return!1;let s=Date.now()-t.now;return t.maxAge?s>t.maxAge:e[pt]&&s>e[pt]},vt=e=>{if(e[rt]>e[ht])for(let t=e[U].tail;e[rt]>e[ht]&&t!==null;){let s=t.prev;gt(e,t),t=s}},gt=(e,t)=>{if(t){let s=t.value;e[nt]&&e[nt](s.key,s.value),e[rt]-=s.length,e[Y].delete(s.key),e[U].removeNode(t)}},ye=class{constructor(t,s,r,n,l){this.key=t,this.value=s,this.length=r,this.now=n,this.maxAge=l||0}},_e=(e,t,s,r)=>{let n=s.value;wt(e,n)&&(gt(e,s),e[$t]||(n=void 0)),n&&t.call(r,n.value,n.key,e)};$e.exports=de});var xe=K((Mr,Wt)=>{"use strict";var Ae=require("url"),Lt=Ut(),xs=Wt.exports=le(),Rs=ve(),jt=new Rs({max:1e3}),bs={"git+ssh:":"sshurl","git+https:":"https","ssh:":"sshurl","git:":"git"};function Es(e){return bs[e]||e.slice(0,-1)}var Ss={"git:":!0,"https:":!0,"git+https:":!0,"http:":!0,"git+http:":!0},Cs=Object.keys(Lt.byShortcut).concat(["http:","https:","git:","git+ssh:","git+https:","ssh:"]);Wt.exports.fromUrl=function(e,t){if(typeof e!="string")return;let s=e+JSON.stringify(t||{});return jt.has(s)||jt.set(s,Os(e,t)),jt.get(s)};function Os(e,t){if(!e)return;let s=ws(e)?"github:"+e:Hs(e),r=Ts(s);if(!r)return r;let n=Lt.byShortcut[r.protocol],l=Lt.byDomain[r.hostname.startsWith("www.")?r.hostname.slice(4):r.hostname],u=n||l;if(!u)return;let h=Lt[n||l],p=null;Ss[r.protocol]&&(r.username||r.password)&&(p=`${r.username}${r.password?":"+r.password:""}`);let g=null,m=null,$=null,b=null;try{if(n){let y=r.pathname.startsWith("/")?r.pathname.slice(1):r.pathname,A=y.indexOf("@");A>-1&&(y=y.slice(A+1));let S=y.lastIndexOf("/");S>-1?(m=decodeURIComponent(y.slice(0,S)),m||(m=null),$=decodeURIComponent(y.slice(S+1))):$=decodeURIComponent(y),$.endsWith(".git")&&($=$.slice(0,-4)),r.hash&&(g=decodeURIComponent(r.hash.slice(1))),b="shortcut"}else{if(!h.protocols.includes(r.protocol))return;let y=h.extract(r);if(!y)return;m=y.user&&decodeURIComponent(y.user),$=decodeURIComponent(y.project),g=decodeURIComponent(y.committish),b=Es(r.protocol)}}catch(y){if(y instanceof URIError)return;throw y}return new xs(u,m,p,$,g,b,t)}var Hs=e=>{let t=e.indexOf(":"),s=e.slice(0,t+1);if(Cs.includes(s))return e;let r=e.indexOf("@");return r>-1?r>t?`git+ssh://${e}`:e:e.indexOf("//")===t+1?e:e.slice(0,t+1)+"//"+e.slice(t+1)},ws=e=>{let t=e.indexOf("#"),s=e.indexOf("/"),r=e.indexOf("/",s+1),n=e.indexOf(":"),l=/\s/.exec(e),u=e.indexOf("@"),h=!l||t>-1&&l.index>t,p=u===-1||t>-1&&u>t,g=n===-1||t>-1&&n>t,m=r===-1||t>-1&&r>t,$=s>0,b=t>-1?e[t-1]!=="/":!e.endsWith("/"),y=!e.startsWith(".");return h&&$&&b&&y&&p&&g&&m},Ls=e=>{let t=e.indexOf("@"),s=e.lastIndexOf("#"),r=e.indexOf(":"),n=e.lastIndexOf(":",s>-1?s:1/0),l;return n>t&&(l=e.slice(0,n)+"/"+e.slice(n+1),r=l.indexOf(":"),n=l.lastIndexOf(":")),r===-1&&e.indexOf("//")===-1&&(l=`git+ssh://${l}`),l},Ts=e=>{let t;try{t=new Ae.URL(e)}catch{}if(t)return t;let s=Ls(e);try{t=new Ae.URL(s)}catch{}return t}});var be=K((Gr,Re)=>{"use strict";var{parse:Is}=require("url"),Ns=new RegExp(/^\/?:?([/\w-.]+)\/([\w-.]+)\/?$/),Ms=new RegExp(/^\/repos\/([\w-.]+)\/([\w-.]+)\/(?:tarball|zipball)(?:\/.+)?$/),Gs=new RegExp(/^\/([\w-.]+)\/([\w-.]+)\/(?:legacy\.(?:zip|tar\.gz))(?:\/.+)?$/);Re.exports=e=>{let t=e.replace(/^git@/,"https://git@").replace(/\.git$/,""),s=Is(t),r=n=>({browse:Ds(s,n),domain:s.host,project:n[2]||null,type:ks(s),user:n[1]||null});if(s.host){if(s.host.includes("api.github.com")){let n=Ms.exec(s.pathname)||[];return r(n)}if(s.host.includes("codeload.github.com")){let n=Gs.exec(s.pathname)||[];return r(n)}}return r(Ns.exec(s.pathname)||[])};function ks(e){return typeof e.host!="string"?null:e.host.indexOf("github")!==-1?"github":e.host.indexOf("gitlab")!==-1?"gitlab":null}function Ds(e,t){let r=`${e.protocol==="http:"?"http:":"https:"}//${e.host}/${t[1]}/${t[2]}`;return()=>r}});var Se=K((kr,Ee)=>{"use strict";var Us=xe(),Ps=be();Ee.exports=e=>{if(!e||!e.repository||typeof e.repository!="string"&&!e.repository.url)throw new Error('No valid "repository" data found in package metadata. Please see https://docs.npmjs.com/files/package.json#repository for proper syntax.');let t=typeof e.repository=="string"?e.repository:e.repository.url;return Us.fromUrl(t)||Ps(t)}});var At=K((zr,Te)=>{"use strict";var Bs=require("path"),st="\\\\/",Oe=`[^${st}]`,it="\\.",js="\\+",Ws="\\?",Nt="\\/",Fs="(?=.)",He="[^/]",qt=`(?:${Nt}|$)`,we=`(?:^|${Nt})`,Kt=`${it}{1,2}${qt}`,qs=`(?!${it})`,Ks=`(?!${we}${Kt})`,Xs=`(?!${it}{0,1}${qt})`,zs=`(?!${Kt})`,Qs=`[^.${Nt}]`,Vs=`${He}*?`,Le={DOT_LITERAL:it,PLUS_LITERAL:js,QMARK_LITERAL:Ws,SLASH_LITERAL:Nt,ONE_CHAR:Fs,QMARK:He,END_ANCHOR:qt,DOTS_SLASH:Kt,NO_DOT:qs,NO_DOTS:Ks,NO_DOT_SLASH:Xs,NO_DOTS_SLASH:zs,QMARK_NO_DOT:Qs,STAR:Vs,START_ANCHOR:we},Js=J(D({},Le),{SLASH_LITERAL:`[${st}]`,QMARK:Oe,STAR:`${Oe}*?`,DOTS_SLASH:`${it}{1,2}(?:[${st}]|$)`,NO_DOT:`(?!${it})`,NO_DOTS:`(?!(?:^|[${st}])${it}{1,2}(?:[${st}]|$))`,NO_DOT_SLASH:`(?!${it}{0,1}(?:[${st}]|$))`,NO_DOTS_SLASH:`(?!${it}{1,2}(?:[${st}]|$))`,QMARK_NO_DOT:`[^.${st}]`,START_ANCHOR:`(?:^|[${st}])`,END_ANCHOR:`(?:[${st}]|$)`}),Zs={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};Te.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:Zs,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:Bs.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?Js:Le}}});var Mt=K(X=>{"use strict";var Ys=require("path"),tr=process.platform==="win32",{REGEX_BACKSLASH:er,REGEX_REMOVE_BACKSLASH:sr,REGEX_SPECIAL_CHARS:rr,REGEX_SPECIAL_CHARS_GLOBAL:nr}=At();X.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);X.hasRegexChars=e=>rr.test(e);X.isRegexChar=e=>e.length===1&&X.hasRegexChars(e);X.escapeRegex=e=>e.replace(nr,"\\$1");X.toPosixSlashes=e=>e.replace(er,"/");X.removeBackslashes=e=>e.replace(sr,t=>t==="\\"?"":t);X.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};X.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:tr===!0||Ys.sep==="\\";X.escapeLast=(e,t,s)=>{let r=e.lastIndexOf(t,s);return r===-1?e:e[r-1]==="\\"?X.escapeLast(e,t,r-1):`${e.slice(0,r)}\\${e.slice(r)}`};X.removePrefix=(e,t={})=>{let s=e;return s.startsWith("./")&&(s=s.slice(2),t.prefix="./"),s};X.wrapOutput=(e,t={},s={})=>{let r=s.contains?"":"^",n=s.contains?"":"$",l=`${r}(?:${e})${n}`;return t.negated===!0&&(l=`(?:^(?!${l}).*$)`),l}});var Pe=K((Vr,Ue)=>{"use strict";var Ie=Mt(),{CHAR_ASTERISK:Xt,CHAR_AT:ir,CHAR_BACKWARD_SLASH:xt,CHAR_COMMA:or,CHAR_DOT:zt,CHAR_EXCLAMATION_MARK:Qt,CHAR_FORWARD_SLASH:Ne,CHAR_LEFT_CURLY_BRACE:Vt,CHAR_LEFT_PARENTHESES:Jt,CHAR_LEFT_SQUARE_BRACKET:ar,CHAR_PLUS:ur,CHAR_QUESTION_MARK:Me,CHAR_RIGHT_CURLY_BRACE:lr,CHAR_RIGHT_PARENTHESES:Ge,CHAR_RIGHT_SQUARE_BRACKET:cr}=At(),ke=e=>e===Ne||e===xt,De=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},hr=(e,t)=>{let s=t||{},r=e.length-1,n=s.parts===!0||s.scanToEnd===!0,l=[],u=[],h=[],p=e,g=-1,m=0,$=0,b=!1,y=!1,A=!1,S=!1,L=!1,I=!1,k=!1,C=!1,q=!1,B=!1,ot=0,j,d,E={value:"",depth:0,isGlob:!1},P=()=>g>=r,a=()=>p.charCodeAt(g+1),T=()=>(j=d,p.charCodeAt(++g));for(;g<r;){d=T();let W;if(d===xt){k=E.backslashes=!0,d=T(),d===Vt&&(I=!0);continue}if(I===!0||d===Vt){for(ot++;P()!==!0&&(d=T());){if(d===xt){k=E.backslashes=!0,T();continue}if(d===Vt){ot++;continue}if(I!==!0&&d===zt&&(d=T())===zt){if(b=E.isBrace=!0,A=E.isGlob=!0,B=!0,n===!0)continue;break}if(I!==!0&&d===or){if(b=E.isBrace=!0,A=E.isGlob=!0,B=!0,n===!0)continue;break}if(d===lr&&(ot--,ot===0)){I=!1,b=E.isBrace=!0,B=!0;break}}if(n===!0)continue;break}if(d===Ne){if(l.push(g),u.push(E),E={value:"",depth:0,isGlob:!1},B===!0)continue;if(j===zt&&g===m+1){m+=2;continue}$=g+1;continue}if(s.noext!==!0&&(d===ur||d===ir||d===Xt||d===Me||d===Qt)===!0&&a()===Jt){if(A=E.isGlob=!0,S=E.isExtglob=!0,B=!0,d===Qt&&g===m&&(q=!0),n===!0){for(;P()!==!0&&(d=T());){if(d===xt){k=E.backslashes=!0,d=T();continue}if(d===Ge){A=E.isGlob=!0,B=!0;break}}continue}break}if(d===Xt){if(j===Xt&&(L=E.isGlobstar=!0),A=E.isGlob=!0,B=!0,n===!0)continue;break}if(d===Me){if(A=E.isGlob=!0,B=!0,n===!0)continue;break}if(d===ar){for(;P()!==!0&&(W=T());){if(W===xt){k=E.backslashes=!0,T();continue}if(W===cr){y=E.isBracket=!0,A=E.isGlob=!0,B=!0;break}}if(n===!0)continue;break}if(s.nonegate!==!0&&d===Qt&&g===m){C=E.negated=!0,m++;continue}if(s.noparen!==!0&&d===Jt){if(A=E.isGlob=!0,n===!0){for(;P()!==!0&&(d=T());){if(d===Jt){k=E.backslashes=!0,d=T();continue}if(d===Ge){B=!0;break}}continue}break}if(A===!0){if(B=!0,n===!0)continue;break}}s.noext===!0&&(S=!1,A=!1);let O=p,at="",i="";m>0&&(at=p.slice(0,m),p=p.slice(m),$-=m),O&&A===!0&&$>0?(O=p.slice(0,$),i=p.slice($)):A===!0?(O="",i=p):O=p,O&&O!==""&&O!=="/"&&O!==p&&ke(O.charCodeAt(O.length-1))&&(O=O.slice(0,-1)),s.unescape===!0&&(i&&(i=Ie.removeBackslashes(i)),O&&k===!0&&(O=Ie.removeBackslashes(O)));let o={prefix:at,input:e,start:m,base:O,glob:i,isBrace:b,isBracket:y,isGlob:A,isExtglob:S,isGlobstar:L,negated:C,negatedExtglob:q};if(s.tokens===!0&&(o.maxDepth=0,ke(d)||u.push(E),o.tokens=u),s.parts===!0||s.tokens===!0){let W;for(let x=0;x<l.length;x++){let tt=W?W+1:m,et=l[x],z=e.slice(tt,et);s.tokens&&(x===0&&m!==0?(u[x].isPrefix=!0,u[x].value=at):u[x].value=z,De(u[x]),o.maxDepth+=u[x].depth),(x!==0||z!=="")&&h.push(z),W=et}if(W&&W+1<e.length){let x=e.slice(W+1);h.push(x),s.tokens&&(u[u.length-1].value=x,De(u[u.length-1]),o.maxDepth+=u[u.length-1].depth)}o.slashes=l,o.parts=h}return o};Ue.exports=hr});var Fe=K((Jr,We)=>{"use strict";var Gt=At(),V=Mt(),{MAX_LENGTH:kt,POSIX_REGEX_SOURCE:pr,REGEX_NON_SPECIAL_CHARS:fr,REGEX_SPECIAL_CHARS_BACKREF:mr,REPLACEMENTS:Be}=Gt,gr=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let s=`[${e.join("-")}]`;try{new RegExp(s)}catch{return e.map(n=>V.escapeRegex(n)).join("..")}return s},dt=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,je=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=Be[e]||e;let s=D({},t),r=typeof s.maxLength=="number"?Math.min(kt,s.maxLength):kt,n=e.length;if(n>r)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${r}`);let l={type:"bos",value:"",output:s.prepend||""},u=[l],h=s.capture?"":"?:",p=V.isWindows(t),g=Gt.globChars(p),m=Gt.extglobChars(g),{DOT_LITERAL:$,PLUS_LITERAL:b,SLASH_LITERAL:y,ONE_CHAR:A,DOTS_SLASH:S,NO_DOT:L,NO_DOT_SLASH:I,NO_DOTS_SLASH:k,QMARK:C,QMARK_NO_DOT:q,STAR:B,START_ANCHOR:ot}=g,j=f=>`(${h}(?:(?!${ot}${f.dot?S:$}).)*?)`,d=s.dot?"":L,E=s.dot?C:q,P=s.bash===!0?j(s):B;s.capture&&(P=`(${P})`),typeof s.noext=="boolean"&&(s.noextglob=s.noext);let a={input:e,index:-1,start:0,dot:s.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:u};e=V.removePrefix(e,a),n=e.length;let T=[],O=[],at=[],i=l,o,W=()=>a.index===n-1,x=a.peek=(f=1)=>e[a.index+f],tt=a.advance=()=>e[++a.index]||"",et=()=>e.slice(a.index+1),z=(f="",H=0)=>{a.consumed+=f,a.index+=H},bt=f=>{a.output+=f.output!=null?f.output:f.value,z(f.value)},is=()=>{let f=1;for(;x()==="!"&&(x(2)!=="("||x(3)==="?");)tt(),a.start++,f++;return f%2==0?!1:(a.negated=!0,a.start++,!0)},Et=f=>{a[f]++,at.push(f)},lt=f=>{a[f]--,at.pop()},v=f=>{if(i.type==="globstar"){let H=a.braces>0&&(f.type==="comma"||f.type==="brace"),c=f.extglob===!0||T.length&&(f.type==="pipe"||f.type==="paren");f.type!=="slash"&&f.type!=="paren"&&!H&&!c&&(a.output=a.output.slice(0,-i.output.length),i.type="star",i.value="*",i.output=P,a.output+=i.output)}if(T.length&&f.type!=="paren"&&(T[T.length-1].inner+=f.value),(f.value||f.output)&&bt(f),i&&i.type==="text"&&f.type==="text"){i.value+=f.value,i.output=(i.output||"")+f.value;return}f.prev=i,u.push(f),i=f},St=(f,H)=>{let c=J(D({},m[H]),{conditions:1,inner:""});c.prev=i,c.parens=a.parens,c.output=a.output;let _=(s.capture?"(":"")+c.open;Et("parens"),v({type:f,value:H,output:a.output?"":A}),v({type:"paren",extglob:!0,value:tt(),output:_}),T.push(c)},os=f=>{let H=f.close+(s.capture?")":""),c;if(f.type==="negate"){let _=P;f.inner&&f.inner.length>1&&f.inner.includes("/")&&(_=j(s)),(_!==P||W()||/^\)+$/.test(et()))&&(H=f.close=`)$))${_}`),f.inner.includes("*")&&(c=et())&&/^\.[^\\/.]+$/.test(c)&&(H=f.close=`)${c})${_})`),f.prev.type==="bos"&&(a.negatedExtglob=!0)}v({type:"paren",extglob:!0,value:o,output:H}),lt("parens")};if(s.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let f=!1,H=e.replace(mr,(c,_,N,F,G,Dt)=>F==="\\"?(f=!0,c):F==="?"?_?_+F+(G?C.repeat(G.length):""):Dt===0?E+(G?C.repeat(G.length):""):C.repeat(N.length):F==="."?$.repeat(N.length):F==="*"?_?_+F+(G?P:""):P:_?c:`\\${c}`);return f===!0&&(s.unescape===!0?H=H.replace(/\\/g,""):H=H.replace(/\\+/g,c=>c.length%2==0?"\\\\":c?"\\":"")),H===e&&s.contains===!0?(a.output=e,a):(a.output=V.wrapOutput(H,a,t),a)}for(;!W();){if(o=tt(),o==="\0")continue;if(o==="\\"){let c=x();if(c==="/"&&s.bash!==!0||c==="."||c===";")continue;if(!c){o+="\\",v({type:"text",value:o});continue}let _=/^\\+/.exec(et()),N=0;if(_&&_[0].length>2&&(N=_[0].length,a.index+=N,N%2!=0&&(o+="\\")),s.unescape===!0?o=tt():o+=tt(),a.brackets===0){v({type:"text",value:o});continue}}if(a.brackets>0&&(o!=="]"||i.value==="["||i.value==="[^")){if(s.posix!==!1&&o===":"){let c=i.value.slice(1);if(c.includes("[")&&(i.posix=!0,c.includes(":"))){let _=i.value.lastIndexOf("["),N=i.value.slice(0,_),F=i.value.slice(_+2),G=pr[F];if(G){i.value=N+G,a.backtrack=!0,tt(),!l.output&&u.indexOf(i)===1&&(l.output=A);continue}}}(o==="["&&x()!==":"||o==="-"&&x()==="]")&&(o=`\\${o}`),o==="]"&&(i.value==="["||i.value==="[^")&&(o=`\\${o}`),s.posix===!0&&o==="!"&&i.value==="["&&(o="^"),i.value+=o,bt({value:o});continue}if(a.quotes===1&&o!=='"'){o=V.escapeRegex(o),i.value+=o,bt({value:o});continue}if(o==='"'){a.quotes=a.quotes===1?0:1,s.keepQuotes===!0&&v({type:"text",value:o});continue}if(o==="("){Et("parens"),v({type:"paren",value:o});continue}if(o===")"){if(a.parens===0&&s.strictBrackets===!0)throw new SyntaxError(dt("opening","("));let c=T[T.length-1];if(c&&a.parens===c.parens+1){os(T.pop());continue}v({type:"paren",value:o,output:a.parens?")":"\\)"}),lt("parens");continue}if(o==="["){if(s.nobracket===!0||!et().includes("]")){if(s.nobracket!==!0&&s.strictBrackets===!0)throw new SyntaxError(dt("closing","]"));o=`\\${o}`}else Et("brackets");v({type:"bracket",value:o});continue}if(o==="]"){if(s.nobracket===!0||i&&i.type==="bracket"&&i.value.length===1){v({type:"text",value:o,output:`\\${o}`});continue}if(a.brackets===0){if(s.strictBrackets===!0)throw new SyntaxError(dt("opening","["));v({type:"text",value:o,output:`\\${o}`});continue}lt("brackets");let c=i.value.slice(1);if(i.posix!==!0&&c[0]==="^"&&!c.includes("/")&&(o=`/${o}`),i.value+=o,bt({value:o}),s.literalBrackets===!1||V.hasRegexChars(c))continue;let _=V.escapeRegex(i.value);if(a.output=a.output.slice(0,-i.value.length),s.literalBrackets===!0){a.output+=_,i.value=_;continue}i.value=`(${h}${_}|${i.value})`,a.output+=i.value;continue}if(o==="{"&&s.nobrace!==!0){Et("braces");let c={type:"brace",value:o,output:"(",outputIndex:a.output.length,tokensIndex:a.tokens.length};O.push(c),v(c);continue}if(o==="}"){let c=O[O.length-1];if(s.nobrace===!0||!c){v({type:"text",value:o,output:o});continue}let _=")";if(c.dots===!0){let N=u.slice(),F=[];for(let G=N.length-1;G>=0&&(u.pop(),N[G].type!=="brace");G--)N[G].type!=="dots"&&F.unshift(N[G].value);_=gr(F,s),a.backtrack=!0}if(c.comma!==!0&&c.dots!==!0){let N=a.output.slice(0,c.outputIndex),F=a.tokens.slice(c.tokensIndex);c.value=c.output="\\{",o=_="\\}",a.output=N;for(let G of F)a.output+=G.output||G.value}v({type:"brace",value:o,output:_}),lt("braces"),O.pop();continue}if(o==="|"){T.length>0&&T[T.length-1].conditions++,v({type:"text",value:o});continue}if(o===","){let c=o,_=O[O.length-1];_&&at[at.length-1]==="braces"&&(_.comma=!0,c="|"),v({type:"comma",value:o,output:c});continue}if(o==="/"){if(i.type==="dot"&&a.index===a.start+1){a.start=a.index+1,a.consumed="",a.output="",u.pop(),i=l;continue}v({type:"slash",value:o,output:y});continue}if(o==="."){if(a.braces>0&&i.type==="dot"){i.value==="."&&(i.output=$);let c=O[O.length-1];i.type="dots",i.output+=o,i.value+=o,c.dots=!0;continue}if(a.braces+a.parens===0&&i.type!=="bos"&&i.type!=="slash"){v({type:"text",value:o,output:$});continue}v({type:"dot",value:o,output:$});continue}if(o==="?"){if(!(i&&i.value==="(")&&s.noextglob!==!0&&x()==="("&&x(2)!=="?"){St("qmark",o);continue}if(i&&i.type==="paren"){let _=x(),N=o;if(_==="<"&&!V.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(i.value==="("&&!/[!=<:]/.test(_)||_==="<"&&!/<([!=]|\w+>)/.test(et()))&&(N=`\\${o}`),v({type:"text",value:o,output:N});continue}if(s.dot!==!0&&(i.type==="slash"||i.type==="bos")){v({type:"qmark",value:o,output:q});continue}v({type:"qmark",value:o,output:C});continue}if(o==="!"){if(s.noextglob!==!0&&x()==="("&&(x(2)!=="?"||!/[!=<:]/.test(x(3)))){St("negate",o);continue}if(s.nonegate!==!0&&a.index===0){is();continue}}if(o==="+"){if(s.noextglob!==!0&&x()==="("&&x(2)!=="?"){St("plus",o);continue}if(i&&i.value==="("||s.regex===!1){v({type:"plus",value:o,output:b});continue}if(i&&(i.type==="bracket"||i.type==="paren"||i.type==="brace")||a.parens>0){v({type:"plus",value:o});continue}v({type:"plus",value:b});continue}if(o==="@"){if(s.noextglob!==!0&&x()==="("&&x(2)!=="?"){v({type:"at",extglob:!0,value:o,output:""});continue}v({type:"text",value:o});continue}if(o!=="*"){(o==="$"||o==="^")&&(o=`\\${o}`);let c=fr.exec(et());c&&(o+=c[0],a.index+=c[0].length),v({type:"text",value:o});continue}if(i&&(i.type==="globstar"||i.star===!0)){i.type="star",i.star=!0,i.value+=o,i.output=P,a.backtrack=!0,a.globstar=!0,z(o);continue}let f=et();if(s.noextglob!==!0&&/^\([^?]/.test(f)){St("star",o);continue}if(i.type==="star"){if(s.noglobstar===!0){z(o);continue}let c=i.prev,_=c.prev,N=c.type==="slash"||c.type==="bos",F=_&&(_.type==="star"||_.type==="globstar");if(s.bash===!0&&(!N||f[0]&&f[0]!=="/")){v({type:"star",value:o,output:""});continue}let G=a.braces>0&&(c.type==="comma"||c.type==="brace"),Dt=T.length&&(c.type==="pipe"||c.type==="paren");if(!N&&c.type!=="paren"&&!G&&!Dt){v({type:"star",value:o,output:""});continue}for(;f.slice(0,3)==="/**";){let Ct=e[a.index+4];if(Ct&&Ct!=="/")break;f=f.slice(3),z("/**",3)}if(c.type==="bos"&&W()){i.type="globstar",i.value+=o,i.output=j(s),a.output=i.output,a.globstar=!0,z(o);continue}if(c.type==="slash"&&c.prev.type!=="bos"&&!F&&W()){a.output=a.output.slice(0,-(c.output+i.output).length),c.output=`(?:${c.output}`,i.type="globstar",i.output=j(s)+(s.strictSlashes?")":"|$)"),i.value+=o,a.globstar=!0,a.output+=c.output+i.output,z(o);continue}if(c.type==="slash"&&c.prev.type!=="bos"&&f[0]==="/"){let Ct=f[1]!==void 0?"|$":"";a.output=a.output.slice(0,-(c.output+i.output).length),c.output=`(?:${c.output}`,i.type="globstar",i.output=`${j(s)}${y}|${y}${Ct})`,i.value+=o,a.output+=c.output+i.output,a.globstar=!0,z(o+tt()),v({type:"slash",value:"/",output:""});continue}if(c.type==="bos"&&f[0]==="/"){i.type="globstar",i.value+=o,i.output=`(?:^|${y}|${j(s)}${y})`,a.output=i.output,a.globstar=!0,z(o+tt()),v({type:"slash",value:"/",output:""});continue}a.output=a.output.slice(0,-i.output.length),i.type="globstar",i.output=j(s),i.value+=o,a.output+=i.output,a.globstar=!0,z(o);continue}let H={type:"star",value:o,output:P};if(s.bash===!0){H.output=".*?",(i.type==="bos"||i.type==="slash")&&(H.output=d+H.output),v(H);continue}if(i&&(i.type==="bracket"||i.type==="paren")&&s.regex===!0){H.output=o,v(H);continue}(a.index===a.start||i.type==="slash"||i.type==="dot")&&(i.type==="dot"?(a.output+=I,i.output+=I):s.dot===!0?(a.output+=k,i.output+=k):(a.output+=d,i.output+=d),x()!=="*"&&(a.output+=A,i.output+=A)),v(H)}for(;a.brackets>0;){if(s.strictBrackets===!0)throw new SyntaxError(dt("closing","]"));a.output=V.escapeLast(a.output,"["),lt("brackets")}for(;a.parens>0;){if(s.strictBrackets===!0)throw new SyntaxError(dt("closing",")"));a.output=V.escapeLast(a.output,"("),lt("parens")}for(;a.braces>0;){if(s.strictBrackets===!0)throw new SyntaxError(dt("closing","}"));a.output=V.escapeLast(a.output,"{"),lt("braces")}if(s.strictSlashes!==!0&&(i.type==="star"||i.type==="bracket")&&v({type:"maybe_slash",value:"",output:`${y}?`}),a.backtrack===!0){a.output="";for(let f of a.tokens)a.output+=f.output!=null?f.output:f.value,f.suffix&&(a.output+=f.suffix)}return a};je.fastpaths=(e,t)=>{let s=D({},t),r=typeof s.maxLength=="number"?Math.min(kt,s.maxLength):kt,n=e.length;if(n>r)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${r}`);e=Be[e]||e;let l=V.isWindows(t),{DOT_LITERAL:u,SLASH_LITERAL:h,ONE_CHAR:p,DOTS_SLASH:g,NO_DOT:m,NO_DOTS:$,NO_DOTS_SLASH:b,STAR:y,START_ANCHOR:A}=Gt.globChars(l),S=s.dot?$:m,L=s.dot?b:m,I=s.capture?"":"?:",k={negated:!1,prefix:""},C=s.bash===!0?".*?":y;s.capture&&(C=`(${C})`);let q=d=>d.noglobstar===!0?C:`(${I}(?:(?!${A}${d.dot?g:u}).)*?)`,B=d=>{switch(d){case"*":return`${S}${p}${C}`;case".*":return`${u}${p}${C}`;case"*.*":return`${S}${C}${u}${p}${C}`;case"*/*":return`${S}${C}${h}${p}${L}${C}`;case"**":return S+q(s);case"**/*":return`(?:${S}${q(s)}${h})?${L}${p}${C}`;case"**/*.*":return`(?:${S}${q(s)}${h})?${L}${C}${u}${p}${C}`;case"**/.*":return`(?:${S}${q(s)}${h})?${u}${p}${C}`;default:{let E=/^(.*?)\.(\w+)$/.exec(d);if(!E)return;let P=B(E[1]);return P?P+u+E[2]:void 0}}},ot=V.removePrefix(e,k),j=B(ot);return j&&s.strictSlashes!==!0&&(j+=`${h}?`),j};We.exports=je});var Ke=K((Zr,qe)=>{"use strict";var dr=require("path"),yr=Pe(),Zt=Fe(),Yt=Mt(),_r=At(),$r=e=>e&&typeof e=="object"&&!Array.isArray(e),M=(e,t,s=!1)=>{if(Array.isArray(e)){let m=e.map(b=>M(b,t,s));return b=>{for(let y of m){let A=y(b);if(A)return A}return!1}}let r=$r(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!r)throw new TypeError("Expected pattern to be a non-empty string");let n=t||{},l=Yt.isWindows(t),u=r?M.compileRe(e,t):M.makeRe(e,t,!1,!0),h=u.state;delete u.state;let p=()=>!1;if(n.ignore){let m=J(D({},t),{ignore:null,onMatch:null,onResult:null});p=M(n.ignore,m,s)}let g=(m,$=!1)=>{let{isMatch:b,match:y,output:A}=M.test(m,u,t,{glob:e,posix:l}),S={glob:e,state:h,regex:u,posix:l,input:m,output:A,match:y,isMatch:b};return typeof n.onResult=="function"&&n.onResult(S),b===!1?(S.isMatch=!1,$?S:!1):p(m)?(typeof n.onIgnore=="function"&&n.onIgnore(S),S.isMatch=!1,$?S:!1):(typeof n.onMatch=="function"&&n.onMatch(S),$?S:!0)};return s&&(g.state=h),g};M.test=(e,t,s,{glob:r,posix:n}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let l=s||{},u=l.format||(n?Yt.toPosixSlashes:null),h=e===r,p=h&&u?u(e):e;return h===!1&&(p=u?u(e):e,h=p===r),(h===!1||l.capture===!0)&&(l.matchBase===!0||l.basename===!0?h=M.matchBase(e,t,s,n):h=t.exec(p)),{isMatch:Boolean(h),match:h,output:p}};M.matchBase=(e,t,s,r=Yt.isWindows(s))=>(t instanceof RegExp?t:M.makeRe(t,s)).test(dr.basename(e));M.isMatch=(e,t,s)=>M(t,s)(e);M.parse=(e,t)=>Array.isArray(e)?e.map(s=>M.parse(s,t)):Zt(e,J(D({},t),{fastpaths:!1}));M.scan=(e,t)=>yr(e,t);M.compileRe=(e,t,s=!1,r=!1)=>{if(s===!0)return e.output;let n=t||{},l=n.contains?"":"^",u=n.contains?"":"$",h=`${l}(?:${e.output})${u}`;e&&e.negated===!0&&(h=`^(?!${h}).*$`);let p=M.toRegex(h,t);return r===!0&&(p.state=e),p};M.makeRe=(e,t={},s=!1,r=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(n.output=Zt.fastpaths(e,t)),n.output||(n=Zt(e,t)),M.compileRe(n,t,s,r)};M.toRegex=(e,t)=>{try{let s=t||{};return new RegExp(e,s.flags||(s.nocase?"i":""))}catch(s){if(t&&t.debug===!0)throw s;return/$^/}};M.constants=_r;qe.exports=M});var ze=K((Yr,Xe)=>{"use strict";Xe.exports=Ke()});var te=ut(require("path")),ee=ut(require("fs/promises")),Ye=ut(require("util")),ts=ut(require("child_process")),es=ut(require("url")),ss=ut(Se());var Tt=class{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:t=>this.replacement=t}}replace(t,s,r,n){t&&(r!==null?t[s][r]=n:t[s]=n)}remove(t,s,r){t&&(r!==null?t[s].splice(r,1):delete t[s])}};var Ft=class extends Tt{constructor(t,s){super();this.enter=t,this.leave=s}visit(t,s,r,n){if(t){if(this.enter){let l=this.should_skip,u=this.should_remove,h=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,t,s,r,n),this.replacement&&(t=this.replacement,this.replace(s,r,n,t)),this.should_remove&&this.remove(s,r,n);let p=this.should_skip,g=this.should_remove;if(this.should_skip=l,this.should_remove=u,this.replacement=h,p)return t;if(g)return null}for(let l in t){let u=t[l];if(typeof u=="object")if(Array.isArray(u))for(let h=0;h<u.length;h+=1)u[h]!==null&&typeof u[h].type=="string"&&(this.visit(u[h],t,l,h)||h--);else u!==null&&typeof u.type=="string"&&this.visit(u,t,l,null)}if(this.leave){let l=this.replacement,u=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,t,s,r,n),this.replacement&&(t=this.replacement,this.replace(s,r,n,t)),this.should_remove&&this.remove(s,r,n);let h=this.should_remove;if(this.replacement=l,this.should_remove=u,h)return null}}return t}};function Ce(e,{enter:t,leave:s}){return new Ft(t,s).visit(e,null)}function It(e,t){if(e.type==="MemberExpression")return!e.computed&&It(e.object,e);if(e.type==="Identifier"){if(!t)return!0;switch(t.type){case"MemberExpression":return t.computed||e===t.object;case"MethodDefinition":return t.computed;case"PropertyDefinition":return t.computed||e===t.value;case"Property":return t.computed||e===t.value;case"ExportSpecifier":case"ImportSpecifier":return e===t.local;case"LabeledStatement":case"BreakStatement":case"ContinueStatement":return!1;default:return!0}}return!1}var Rt=ut(require("path")),vr=ut(ze());var ft=class{constructor(){ft.prototype.__init.call(this),ft.prototype.__init2.call(this),ft.prototype.__init3.call(this),ft.prototype.__init4.call(this)}__init(){this.should_skip=!1}__init2(){this.should_remove=!1}__init3(){this.replacement=null}__init4(){this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:t=>this.replacement=t}}replace(t,s,r,n){t&&(r!==null?t[s][r]=n:t[s]=n)}remove(t,s,r){t&&(r!==null?t[s].splice(r,1):delete t[s])}},Qe=class extends ft{constructor(t){super();this.enter=t.enter,this.leave=t.leave}visit(t,s,r,n,l,u){if(t){if(r){let h=this.should_skip,p=this.should_remove,g=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,r.call(this.context,t,s,l,u),this.replacement&&(t=this.replacement,this.replace(s,l,u,t)),this.should_remove&&this.remove(s,l,u);let m=this.should_skip,$=this.should_remove;if(this.should_skip=h,this.should_remove=p,this.replacement=g,m)return t;if($)return null}for(let h in t){let p=t[h];if(typeof p=="object")if(Array.isArray(p))for(let g=0;g<p.length;g+=1)p[g]!==null&&typeof p[g].type=="string"&&(this.visit(p[g],t,r,n,h,g)||g--);else p!==null&&typeof p.type=="string"&&this.visit(p,t,r,n,h,null)}if(n){let h=this.replacement,p=this.should_remove;this.replacement=null,this.should_remove=!1,n.call(this.context,t,s,l,u),this.replacement&&(t=this.replacement,this.replace(s,l,u,t)),this.should_remove&&this.remove(s,l,u);let g=this.should_remove;if(this.replacement=h,this.should_remove=p,g)return null}}return t}};function Ar(e,t){return new Qe(t).visit(e,null,t.enter,t.leave)}var yt={ArrayPattern(e,t){for(let s of t.elements)s&&yt[s.type](e,s)},AssignmentPattern(e,t){yt[t.left.type](e,t.left)},Identifier(e,t){e.push(t.name)},MemberExpression(){},ObjectPattern(e,t){for(let s of t.properties)s.type==="RestElement"?yt.RestElement(e,s):yt[s.value.type](e,s.value)},RestElement(e,t){yt[t.argument.type](e,t.argument)}},Ve=function(t){let s=[];return yt[t.type](s,t),s},xr={const:!0,let:!0},_t=class{constructor(t={}){this.parent=t.parent,this.isBlockScope=!!t.block,this.declarations=Object.create(null),t.params&&t.params.forEach(s=>{Ve(s).forEach(r=>{this.declarations[r]=!0})})}addDeclaration(t,s,r){!s&&this.isBlockScope?this.parent.addDeclaration(t,s,r):t.id&&Ve(t.id).forEach(n=>{this.declarations[n]=!0})}contains(t){return this.declarations[t]||(this.parent?this.parent.contains(t):!1)}},Je=function(t,s="scope"){let r=new _t;return Ar(t,{enter(n,l){let u=n;if(/(Function|Class)Declaration/.test(u.type)&&r.addDeclaration(u,!1,!1),u.type==="VariableDeclaration"){let{kind:p}=u,g=xr[p];u.declarations.forEach(m=>{r.addDeclaration(m,g,!0)})}let h;if(/Function/.test(u.type)){let p=u;h=new _t({parent:r,block:!1,params:p.params}),p.type==="FunctionExpression"&&p.id&&h.addDeclaration(p,!1,!1)}/For(In|Of)?Statement/.test(u.type)&&(h=new _t({parent:r,block:!0})),u.type==="BlockStatement"&&!/Function/.test(l.type)&&(h=new _t({parent:r,block:!0})),u.type==="CatchClause"&&(h=new _t({parent:r,params:u.param?[u.param]:[],block:!0})),h&&(Object.defineProperty(u,s,{value:h,configurable:!0}),r=h)},leave(n){n[s]&&(r=r.parent)}}),r};var Rr="break case class catch const continue debugger default delete do else export extends finally for function if import in instanceof let new return super switch this throw try typeof var void while with yield enum await implements package protected static interface private public",br="arguments Infinity NaN undefined null true false eval uneval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Symbol Error EvalError InternalError RangeError ReferenceError SyntaxError TypeError URIError Number Math Date String RegExp Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array Map Set WeakMap WeakSet SIMD ArrayBuffer DataView JSON Promise Generator GeneratorFunction Reflect Proxy Intl",Er=new Set(`${Rr} ${br}`.split(" "));Er.add("");var Ze=["GM_addStyle","GM_addElement","GM_log","GM_setValue","GM_getValue","GM_deleteValue","GM_listValues","GM_addValueChangeListener","GM_removeValueChangeListener","GM_getResourceText","GM_getResourceURL","GM_registerMenuCommand","GM_unregisterMenuCommand","GM_openInTab","GM_xmlhttpRequest","GM_download","GM_getTab","GM_saveTab","GM_getTabs","GM_notification","GM_setClipboard"];var Sr=(0,Ye.promisify)(ts.exec),Cr=e=>{let t=e?.author;if(typeof t=="string")return t;if(typeof t=="object")return`${t.name}`},Or=async()=>{let{stdout:e}=await Sr("git branch --show-current").catch();return e?.trim()},rs=e=>{let t=Math.max(...e.map(([s])=>s.length));return["// ==UserScript==",...e.map(([s,r])=>`// ${s.padEnd(t+4)}${r}`),"// ==/UserScript=="].join(`
`)},ns=process.cwd();module.exports=function({metaPath:e,transformHeaderContent:t,outputFile:s}={metaPath:(0,te.resolve)(ns,"meta.json"),transformHeaderContent:void 0,outputFile:"main.user.js"}){let r=new Map;return{name:"tampermonkey-header",buildStart(){this.addWatchFile(e)},transform(n,l){let u=this.parse(n),h=Je(u,"scope"),p=new Set,g=new Set;Ce(u,{enter(m,$){if(m.scope&&(h=m.scope),m.type==="Identifier"&&It(m,$)&&!h.contains(m.name)){let b=m.name;if(Ze.includes(b)&&(p.add(b),b==="GM_xmlhttpRequest"&&$.callee===m)){let y=$?.arguments?.[0]?.properties?.find(({key:A})=>A.type==="Identifier"&&A.name==="url");y&&y.value.type==="Literal"&&g.add(new es.URL(y.value.value).host)}}},leave(m){m.scope&&(h=h.parent)}}),r.set(l,{grantSet:p,connectSet:g})},async banner(){try{let n=(0,te.resolve)(ns,"package.json"),l=JSON.parse(await(0,ee.readFile)(n)),u=l.repository&&(0,ss.default)(l),h=u?.browse(),p={};if(u){let L=await Or(),I=u.type==="github"?h.replace(u.domain,"raw.githubusercontent.com")+`/${L}/${s}`:"";Object.assign(p,{"@homepage":`${h}#readme`,"@supportURL":`${h}/issue`,"@updateURL":I,"@downloadURL":I})}let g=D({"@name":l.name,"@namespace":h??l.name,"@version":l.version,"@author":Cr(l),"@description":l.description,"@icon":l.icon,"@include":"*"},p);try{let L=await(0,ee.readFile)(e),I=JSON.parse(L);Object.assign(g,I)}catch{}let m=Object.entries(g).reduce((L,[I,k])=>(k&&(["@grant","@connect","@require","@resource","@include","@match","@exclude"].includes(I)&&Array.isArray(k)?k.forEach(C=>L.push([I,C])):L.push([I,k])),L),[]),$=new Set,b=new Set,y=this.getModuleIds();for(let L of y){let I=r.get(L);if(I){let{grantSet:k,connectSet:C}=I;for(let q of k)$.add(q);for(let q of C)b.add(q)}}for(let L of $)m.push(["@grant",L]);for(let L of b)m.push(["@connect",L]);let A=[...new Set(m.map(JSON.stringify))].map(JSON.parse),S=t?.(A)??A;return rs(S)}catch(n){console.log(n)}},api:{generateUserScriptHeader:rs}}};
